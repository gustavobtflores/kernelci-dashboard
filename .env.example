# =============================================================================
# KernelCI Dashboard â€” Single .env for docker-compose-next.yml
# =============================================================================
# Copy this file to .env and edit the values marked CHANGE_ME.
# See DEPLOYMENT.md for full deployment instructions.

# -----------------------------------------------------------------------------
# Image Configuration
# -----------------------------------------------------------------------------
# Pre-built images are pulled from this registry. Override for custom builds.
IMAGE_REGISTRY=ghcr.io
IMAGE_OWNER=kernelci
IMAGE_REPOSITORY=dashboard
IMAGE_TAG=latest

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------
# For production: point to your external PostgreSQL instance.
# For staging (--profile=local-db): keep DB_HOST=dashboard_db.
DB_HOST=dashboard_db
DB_PORT=5432
DB_NAME=dashboard
DB_USER=admin
DB_PASSWORD=CHANGE_ME
DB_ENGINE=django.db.backends.postgresql
DB_OPTIONS_CONNECT_TIMEOUT=16

# Optional: separate application database user/name for setup-dashboard-db.sh.
# Defaults to DB_USER / DB_NAME if not set.
# APP_DB_USER=dashboard
# APP_DB=dashboard

# -----------------------------------------------------------------------------
# Django
# -----------------------------------------------------------------------------
DJANGO_SECRET_KEY=CHANGE_ME
ALLOWED_HOSTS=["backend", "localhost"]
CORS_ALLOWED_ORIGINS=[]
DEBUG=False
SKIP_CRONJOBS=False

# -----------------------------------------------------------------------------
# Debug Flags (uncomment to enable)
# -----------------------------------------------------------------------------
# DEBUG_DB_VARS=True
# ENABLE_LOGGING=True
# DEBUG_SQL_QUERY=True

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
# Always "redis" when running inside Docker Compose.
REDIS_HOST=redis

# -----------------------------------------------------------------------------
# Monitoring (optional)
# -----------------------------------------------------------------------------
# See docs/monitoring.md for details.
PROMETHEUS_METRICS_ENABLED=False
# PROMETHEUS_METRICS_PORT=8001
# PROMETHEUS_MULTIPROC_DIR=/tmp/metrics

# -----------------------------------------------------------------------------
# Email / Notifications (optional)
# -----------------------------------------------------------------------------
# See docs/notifications.md for details.
# EMAIL_HOST=smtp.gmail.com
# EMAIL_PORT=587
# EMAIL_USE_TLS=True
# EMAIL_HOST_USER=bot@kernelci.org
# EMAIL_HOST_PASSWORD=
# DISCORD_WEBHOOK_URL=

# -----------------------------------------------------------------------------
# Backend Volume
# -----------------------------------------------------------------------------
BACKEND_VOLUME_DIR=/volume_data

# -----------------------------------------------------------------------------
# Ingester (only needed with --profile=with_commands)
# -----------------------------------------------------------------------------
# Host path where the ingester monitors for submission files.
INGESTER_SPOOL_DIR=../spool
# INGESTER_METRICS_PORT=8002
